<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>

    <form method="post" asp-controller="Coleta" asp-action="UploadImage" enctype="multipart/form-data">
        <div style="height:500px; width:100%; border:solid 1px;border-radius:0px 20px 0px 20px; position:center">
            <input type="file" id="fileInput" name="file" accept="image/*" required>
            <button type="submit">Enviar Imagem</button>

        </div>
    </form>

    @section Scripts {
        @if (TempData.ContainsKey("Mensagem"))
        {
            <script>

                alert('@Html.Raw(TempData["Mensagem"])');
            </script>

        }
        <script>
            function uploadImage() {
                const fileInput = document.getElementById('fileInput');
                const file = fileInput.files[0];
                console.log(fileInput);

                if (file) {
                    const formData = new FormData();
                    formData.append('file', file);

                    $.ajax({
                        url: '/Coleta/UploadImage',  // Endpoint for your backend
                        type: 'POST',
                        data: formData,
                        contentType: false,
                        processData: false,
                        success: function (response) {
                            console.log('Imagem enviada com sucesso:', response);
                        },
                        error: function (error) {
                            console.error('Erro ao enviar a imagem:', error);
                        }
                    });
                    console.log(file);
                } else {
                    console.log("null");

                    alert('Selecione uma imagem para fazer upload.');
                }
            }

        </script>


    }
</body>
</html>